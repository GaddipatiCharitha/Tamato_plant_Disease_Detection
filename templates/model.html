{% extends "base.html" %}
{% block content %}

<style>
    .model-section { margin: 30px 0; }
    .spec-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
    .spec-item { background: var(--card); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent); }
    .spec-label { color: var(--muted); font-size: 0.9em; text-transform: uppercase; letter-spacing: 1px; }
    .spec-value { color: var(--text); font-size: 1.3em; font-weight: 600; margin-top: 8px; }
    @media (max-width: 600px) { .spec-grid { grid-template-columns: 1fr; } }
</style>

<div style="max-width: 1100px; margin: 0 auto;">
<h1 style="margin-bottom: 10px;">ü§ñ Model Information</h1>
<p style="color: var(--muted); font-size: 1.1em; margin-bottom: 30px;">Comprehensive specifications and performance metrics</p>

<div class="model-section">
    <h2>üìê Architecture</h2>
    <div class="spec-grid">
        <div class="spec-item"><div class="spec-label">Base Model</div><div class="spec-value">MobileNetV2</div></div>
        <div class="spec-item"><div class="spec-label">Format</div><div class="spec-value">TensorFlow Lite</div></div>
        <div class="spec-item"><div class="spec-label">Quantization</div><div class="spec-value">INT8</div></div>
        <div class="spec-item"><div class="spec-label">Input Size</div><div class="spec-value">224 √ó 224</div></div>
    </div>
</div>

<div class="model-section">
    <h2>üìä Training Dataset</h2>
    <div class="card" style="padding: 20px;">
        <ul style="list-style: none; padding: 0;">
            <li style="padding: 8px 0; border-bottom: 1px solid var(--muted);"><strong>Source:</strong> PlantVillage Tomato Disease</li>
            <li style="padding: 8px 0; border-bottom: 1px solid var(--muted);"><strong>Classes:</strong> 10 diseases + healthy</li>
            <li style="padding: 8px 0; border-bottom: 1px solid var(--muted);"><strong>Training:</strong> ~10,000 images</li>
            <li style="padding: 8px 0;"><strong>Validation:</strong> ~1,000 images</li>
        </ul>
    </div>
</div>

<div class="model-section">
    <h2>üçÖ Detectable Diseases (10 Classes)</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px; margin: 15px 0;">
        <div class="card" style="padding: 12px; border-left: 4px solid #27ae60;"><strong style="color: #27ae60;">‚úì Healthy</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #e74c3c;"><strong style="color: #e74c3c;">Bacterial Spot</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #e67e22;"><strong style="color: #e67e22;">Early Blight</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #c0392b;"><strong style="color: #c0392b;">Late Blight</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #8e44ad;"><strong style="color: #8e44ad;">Leaf Mold</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #2980b9;"><strong style="color: #2980b9;">Septoria Spot</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #16a085;"><strong style="color: #16a085;">Spider Mites</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #d35400;"><strong style="color: #d35400;">Target Spot</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #f39c12;"><strong style="color: #f39c12;">Yellow Curl Virus</strong></div>
        <div class="card" style="padding: 12px; border-left: 4px solid #27ae60;"><strong style="color: #27ae60;">Mosaic Virus</strong></div>
    </div>
</div>

<div class="model-section">
    <h2>‚ö° Optimization & Deployment</h2>
    <div class="spec-grid">
        <div class="spec-item"><div class="spec-label">Target Device</div><div class="spec-value">Raspberry Pi 4</div></div>
        <div class="spec-item"><div class="spec-label">Runtime</div><div class="spec-value">TFLite</div></div>
        <div class="spec-item"><div class="spec-label">Inference Time</div><div class="spec-value">~50-200 ms</div></div>
        <div class="spec-item"><div class="spec-label">Model Size</div><div class="spec-value">~13 MB</div></div>
        <div class="spec-item"><div class="spec-label">Memory</div><div class="spec-value">~150-200 MB</div></div>
        <div class="spec-item"><div class="spec-label">CPU</div><div class="spec-value">ARM64</div></div>
    </div>
</div>

<div class="model-section">
    <h2>üìà Real-time Performance</h2>
    <div id="performance-stats" class="card" style="padding: 20px;"><p style="text-align: center; color: var(--muted);">Loading...</p></div>
</div>

</div>

<script>
async function loadPerformance() {
    try {
        const response = await fetch('/model-performance');
        const data = await response.json();
        const html = `
            <table style="width: 100%; border-collapse: collapse;">
                <tr style="background: var(--muted);"><td style="padding: 10px; border: 1px solid var(--muted);"><strong>Metric</strong></td><td style="padding: 10px; border: 1px solid var(--muted);"><strong>Value</strong></td></tr>
                <tr><td style="padding: 10px; border: 1px solid var(--muted);">Total Predictions</td><td style="padding: 10px; border: 1px solid var(--muted);"><strong>${data.total_predictions}</strong></td></tr>
                <tr style="background: rgba(39, 174, 96, 0.1);"><td style="padding: 10px; border: 1px solid var(--muted);">Model Accuracy</td><td style="padding: 10px; border: 1px solid var(--muted);"><strong style="color: #27ae60;">${data.accuracy_percent}%</strong></td></tr>
                <tr><td style="padding: 10px; border: 1px solid var(--muted);">Avg Confidence</td><td style="padding: 10px; border: 1px solid var(--muted);"><strong>${data.avg_confidence_percent}%</strong></td></tr>
                <tr><td style="padding: 10px; border: 1px solid var(--muted);">Avg Inference Time</td><td style="padding: 10px; border: 1px solid var(--muted);"><strong>${data.avg_inference_time_ms} ms</strong></td></tr>
                <tr><td style="padding: 10px; border: 1px solid var(--muted);">With Feedback</td><td style="padding: 10px; border: 1px solid var(--muted);"><strong>${data.predictions_with_feedback}/${data.total_predictions}</strong></td></tr>
            </table>
        `;
        document.getElementById('performance-stats').innerHTML = html;
    } catch (e) {
        console.error(e);
        document.getElementById('performance-stats').innerHTML = '<p style="color: red;">Error loading data</p>';
    }
}

loadPerformance();
</script>

{% endblock %}