{% extends "base.html" %}
{% block content %}

<h1>Prediction History</h1>

<section class="card">
<table id="historyTable">
<thead>
<tr>
<th>ID</th>
<th>Time</th>
<th>Prediction</th>
<th>Confidence</th>
<th>Inference</th>
</tr>
</thead>
<tbody></tbody>
</table>
</section>

<script>
async function loadHistory(){
 const res = await fetch('/history');
 const data = await res.json();

 const tbody=document.querySelector('tbody');
 tbody.innerHTML='';

 data.forEach(r=>{
   tbody.innerHTML+=`
   <tr>
     <td>${r.id}</td>
     <td>${new Date(r.created_at).toLocaleString()}</td>
     <td>${r.predicted_label}</td>
     <td>${(r.confidence*100).toFixed(1)}%</td>
     <td>${r.inference_time.toFixed(1)} ms</td>
   </tr>`;
 });
}
loadHistory();
</script>

{% endblock %}